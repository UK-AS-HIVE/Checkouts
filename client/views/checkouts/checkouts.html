<template name="checkouts">
{{#if isAdmin}}
{{> checkoutDialog}}
{{> itemDialog}}
{{> deleteItemDialog}}
{{else}}
{{> reserveDialog}}
{{/if}}
<br/>
<br/>
<table class="table table-striped table-condensed" style="border-collapse:collapse;">
  <thead>
    <tr>
      <th>&nbsp;</th>
      <th>Picture</th>
      <th>Name</th>
      <th>Item Type</th>
      <th>Checked Out</th>
    </tr>
  </thead>
  <tbody>
    <tr></tr>
    {{#each checkoutItem}}
    {{> checkoutRow}}
    {{/each}}
  </tbody>
</table>
</template>

<template name="checkoutButtons">
<button class="checkoutBtn pull-left btn-success btn btn-sm" id="checkOutButton">Scan a Barcode</button>
</template>

<template name="checkoutRow">
<tr data-toggle="collapse" data-target="#{{_id}}" class="accordion-toggle">
  <td>
    <span class="glyphicon glyphicon-plus"></span>
  </td>
  <td>
    <img src="http://placehold.it/50x50">
  </td>
  <td>
    <strong>{{name}}</strong>
  </td>
  <td>
    {{category}}
  </td>
  <td>
    {{#if assignedTo}}<span class="unavailable">
      {{#if isAdmin}}
      Checked out to: {{assignedTo}}
      {{else}}
      Unavailable
      {{/if}}</span>
    {{else}}
    <span class="available">Available{{#if dateReserved}} until {{dateReserved}}{{/if}}</span>
    {{/if}}
  </td>
</tr>
<tr>
  <td colspan='7' class="hiddenRow">
    <div class="accordian-body collapse" id="{{_id}}">
      Expected Return: {{#if schedule.expectedReturn}}{{schedule.expectedReturn}}{{/if}}<br>
      Serial No: {{serialNo}}
      {{#if isAdmin}}
      &nbsp;<button class="deleteItemBtn pull-right btn btn-danger btn-sm" data-item="{{_id}}">Delete Item</button>
      &nbsp;<button class="editItemBtn pull-right btn-success btn btn-sm" data-item="{{_id}}">Edit Item</button>
      <button class="checkoutItemBtn pull-right btn-success btn btn-sm" data-item="{{_id}}">{{#if assignedTo}}Check In{{else}}Check Out{{/if}}</button>
      {{else}}
      <button class="reserveItemBtn pull-right btn-success btn btn-sm" data-item="{{_id}}">Reserve this Item</button>
      {{/if}}
      <br>
      Property Tag: {{propertyTag}}

    </div>
  </td>
</tr>
</template>
